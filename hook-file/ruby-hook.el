;;;Ruby
(defun split-and-execute ()
  (interactive)
  (when (one-window-p)
    (split-window-horizontally))
  (setq bn (buffer-name))
  (save-buffer)
  (other-window 1)
  (eshell)
  (insert "ruby ./" bn)
  (eshell-send-input)
  (other-window 1)
  )
(add-hook 'ruby-mode-hook
	  '(lambda()
	     (set-default-coding-systems 'utf-8)
	     (define-key ruby-mode-map [(C c) (c)] 'split-and-execute)
	     (electric-indent-mode)
	     ))
(provide 'ruby-hook)
